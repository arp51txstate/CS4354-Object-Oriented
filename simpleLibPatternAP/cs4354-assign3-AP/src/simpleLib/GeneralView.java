package simpleLib;import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.util.HashMap;import simpleLib.LibSystem.MenuState;public class GeneralView extends ConsoleUserInterface {	public GeneralView(LibSystem lib) {		GeneralView.libs = lib;				title = "Main Menu";		menuOptions = new HashMap<Integer, String>();		menuOptions.put(new Integer(1), "User Menu");				menuOptions.put(new Integer(2), "Librarian Menu");		menuOptions.put(new Integer(3), "Administrator Menu");		menuOptions.put(new Integer(4), "Exit & Save");		if (lib.getCurrentUser() != null) {			menuOptions.put(5, "Logout");			title += " - " + lib.getCurrentUser();		}	}	public boolean parseInput(int choice) {		switch (choice) {		case 1:		case 2:		case 3:			loginUser(choice);			break;		case 4:			return true;		case 5:			libs.logoutCurrentUser();			menuOptions.remove(5);			break;					default:			System.err.println("Please select a number between 1 and " + menuOptions.size());		}		return false;	}		private void loginUser(int menuSelection) {		LibraryUser loginUser = libs.getCurrentUser();		if (loginUser == null) {			BufferedReader br = new BufferedReader(new InputStreamReader(					System.in));			String username = "";			String password = "";			System.out.println("Please enter your username: ");			try {				username = br.readLine();				System.out.println("Please enter your password: ");				password = br.readLine();			} catch (IOException e) {				e.printStackTrace();			}			loginUser = libs.checkLogin(username, password);		}		if (loginUser != null) {			libs.setCurrentUser(loginUser);			if (menuSelection <= loginUser.getMenuAccessType().getValue()) {				libs.setMenu(MenuState.values()[menuSelection]);				menuOptions.put(5, "Logout");			} else {				System.out.println(loginUser						+ " does not have access to that menu!");			}		} else {			System.out.println("Login information not accepted.");		}	}}